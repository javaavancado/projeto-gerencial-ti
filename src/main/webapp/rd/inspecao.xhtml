<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>
	<h:form id="formInspecao">
		<p:panel header="Inspeção da Empresa">
			<h:panelGrid columns="3">
				<p:outputLabel value="Código: " />
				<p:inputText id="id" readonly="true" value="#{inspecaoManageBean.inspecao.id}"/>
				<p:message for="id"/>

				<p:outputLabel value="Empresa: " />
				<p:selectOneMenu id="empresa" value="#{inspecaoManageBean.inspecao.empresa}"
					required="true" requiredMessage="Informe a empresa.">
				    <f:converter converterId="empresaConverter"/>
					<f:selectItems var="emp" value="#{inspecaoManageBean.listaComboBox()}" 
					itemValue="#{emp}" itemLabel="#{emp.description}"/>
				</p:selectOneMenu>
				<p:message for="empresa"/>
				
				
				<p:outputLabel value="Produto: " />
				<p:selectOneMenu id="produto" value="#{inspecaoManageBean.inspecao.produto}"
					required="true" requiredMessage="Informe o produto.">
				    <f:converter converterId="produtoConverter"/>
					<f:selectItems var="emp" value="#{produtoManageBean.listaProduto()}" 
					itemValue="#{emp}" itemLabel="#{emp.description}"/>
				</p:selectOneMenu>
				<p:message for="produto"/>
				
				<p:outputLabel value="Data: " />
				<p:calendar id="dataInspecao" value="#{inspecaoManageBean.inspecao.dataInspecao}" 
					pattern="dd/MM/yyyy HH:mm:ss" required="true" requiredMessage="Infoma a data de inspeção.">
					<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy HH:mm:ss"
						dateStyle="long" timeStyle="full" timeZone="GMT-03:00"/>
				</p:calendar>
				<p:message for="dataInspecao"/>
				
				<p:outputLabel value="Local: " />
				<p:inputText id="local" value="#{inspecaoManageBean.inspecao.local}" 
						required="true" requiredMessage="Informe o local da inspeção."/>
				<p:message for="local"/>
				
				<p:outputLabel value="Reprovado: " />
				<p:inputNumber id="reprovado" value="#{inspecaoManageBean.inspecao.reprovado}" 
					required="true" requiredMessage="Informe a quantidade reprovada."/>
				<p:message for="reprovado"/>
				
				<p:outputLabel value="Aprovado: " />
				<p:inputNumber id="aprovado" value="#{inspecaoManageBean.inspecao.aprovado}" 
					required="true" requiredMessage="Informe a quantidade aprovada."/>
				<p:message for="aprovado"/>
				
				<p:outputLabel value="Liberação Condicional: " />
				<p:inputNumber id="liberadoCondicional" value="#{inspecaoManageBean.inspecao.liberadoCondicional}" 
					required="true" requiredMessage="Informe a quantidade com liberação condicional."/>
				<p:message for="liberadoCondicional"/>
				
				<p:outputLabel value="Não Inspecionado: " />
				<p:inputNumber id="naoInspecionado" value="#{inspecaoManageBean.inspecao.naoInspecionado}" 
					required="true" requiredMessage="Informe a quantidade não inspecionada."/>
				<p:message for="naoInspecionado"/>
			    
			</h:panelGrid>
		</p:panel>
		
		<p:spacer height="50px"/>

		<h:panelGrid columns="3">
			<p:commandButton value="Salvar" update="@form tabMenu:formGrafico"
				ajax="true" actionListener="#{inspecaoManageBean.salvar()}" />

			<p:commandLink ajax="false" immediate="true"> 
				<h:graphicImage library="gfx" name="pdf.ico" height="50" width="50" />
				<p:fileDownload value="#{inspecaoManageBean.fileRelatorio}" />
				<f:param name="tipoRelatorio" value="1"/>
			</p:commandLink>
			
			<p:commandLink ajax="false" immediate="true"> 
				<h:graphicImage library="gfx" name="xls.ico" height="50" width="50" />
				<p:fileDownload value="#{inspecaoManageBean.fileRelatorio}" />
				<f:param name="tipoRelatorio" value="2"/>
			</p:commandLink>
			
		</h:panelGrid>

	</h:form>

	<h:form>
		<p:dataTable var="insp" value="#{inspecaoManageBean.inspecoes}">
			<p:column headerText="Id" width="100">
				<h:outputText value="#{insp.id}" />
			</p:column>
			
			<p:column headerText="Empresa">
				<h:outputText value="#{insp.empresa.nome}" />
			</p:column>
			
			<p:column headerText="Produto">
				<h:outputText value="#{insp.produto.descricao}" />
			</p:column>
			
			<p:column headerText="Pdf" width="60">
				<p:commandLink ajax="false" immediate="true"> 
				<h:graphicImage library="gfx" name="pdf.ico" height="50" width="50" />
				<f:param name="inspecaoId" value="#{insp.id}"/>
				<f:param name="tipoRelatorio" value="1"/>
				<p:fileDownload value="#{inspecaoManageBean.fileRelatorioUnico}" />
			</p:commandLink>
			</p:column>
		</p:dataTable>
	</h:form>
</h:body>
</html>
